{"ast":null,"code":"import { useState, useEffect, useRef } from 'react';\nimport { gameStore } from '../components/GameStore';\nimport { msToMinutesSeconds } from '../util';\n\nconst useTimeTaken = ({\n  formatted = false\n} = {}) => {\n  const {\n    paused,\n    millis_taken_before_started: millisTakenBeforeStarted,\n    started_at: startedAt\n  } = gameStore; // INIT TIMER\n\n  const [timeTaken, setTimeTaken] = useState(paused ? millisTakenBeforeStarted : Date.now() - new Date(startedAt).getTime() + millisTakenBeforeStarted);\n  const timeRef = useRef(); // UPDATE TIMER\n\n  useEffect(() => {\n    if (paused) {\n      setTimeTaken(millisTakenBeforeStarted);\n    } else if (!timeRef.current) {\n      timeRef.current = setInterval(() => setTimeTaken(Date.now() - new Date(startedAt).getTime() + millisTakenBeforeStarted), 1000);\n    }\n\n    return () => {\n      if (timeRef.current) {\n        clearInterval(timeRef.current);\n        timeRef.current = undefined;\n      }\n    };\n  }, [setTimeTaken, timeRef, paused, millisTakenBeforeStarted, startedAt]);\n  return formatted ? msToMinutesSeconds(timeTaken) : timeTaken;\n};\n\nexport default useTimeTaken;","map":{"version":3,"sources":["/home/darrrks/WebstormProjects/test_proj/lol_front/src/hooks/useTimeTaken.js"],"names":["useState","useEffect","useRef","gameStore","msToMinutesSeconds","useTimeTaken","formatted","paused","millis_taken_before_started","millisTakenBeforeStarted","started_at","startedAt","timeTaken","setTimeTaken","Date","now","getTime","timeRef","current","setInterval","clearInterval","undefined"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,SAASC,SAAT,QAA0B,yBAA1B;AACA,SAASC,kBAAT,QAAmC,SAAnC;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,SAAS,GAAG;AAAd,IAAwB,EAAzB,KAAgC;AACnD,QAAM;AACJC,IAAAA,MADI;AAEJC,IAAAA,2BAA2B,EAAEC,wBAFzB;AAGJC,IAAAA,UAAU,EAAEC;AAHR,MAIFR,SAJJ,CADmD,CAOnD;;AACA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CACxCO,MAAM,GACFE,wBADE,GAEFK,IAAI,CAACC,GAAL,KACE,IAAID,IAAJ,CAASH,SAAT,EAAoBK,OAApB,EADF,GAEEP,wBALkC,CAA1C;AAOA,QAAMQ,OAAO,GAAGf,MAAM,EAAtB,CAfmD,CAiBnD;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,MAAJ,EAAY;AACVM,MAAAA,YAAY,CAACJ,wBAAD,CAAZ;AACD,KAFD,MAEO,IAAI,CAACQ,OAAO,CAACC,OAAb,EAAsB;AAC3BD,MAAAA,OAAO,CAACC,OAAR,GAAkBC,WAAW,CAC3B,MACEN,YAAY,CACVC,IAAI,CAACC,GAAL,KACE,IAAID,IAAJ,CAASH,SAAT,EAAoBK,OAApB,EADF,GAEEP,wBAHQ,CAFa,EAO3B,IAP2B,CAA7B;AASD;;AACD,WAAO,MAAM;AACX,UAAIQ,OAAO,CAACC,OAAZ,EAAqB;AACnBE,QAAAA,aAAa,CAACH,OAAO,CAACC,OAAT,CAAb;AACAD,QAAAA,OAAO,CAACC,OAAR,GAAkBG,SAAlB;AACD;AACF,KALD;AAMD,GApBQ,EAoBN,CACDR,YADC,EAEDI,OAFC,EAGDV,MAHC,EAIDE,wBAJC,EAKDE,SALC,CApBM,CAAT;AA4BA,SAAOL,SAAS,GAAGF,kBAAkB,CAACQ,SAAD,CAArB,GAAmCA,SAAnD;AACD,CA/CD;;AAiDA,eAAeP,YAAf","sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nimport { gameStore } from '../components/GameStore';\nimport { msToMinutesSeconds } from '../util';\n\nconst useTimeTaken = ({ formatted = false } = {}) => {\n  const {\n    paused,\n    millis_taken_before_started: millisTakenBeforeStarted,\n    started_at: startedAt,\n  } = gameStore;\n\n  // INIT TIMER\n  const [timeTaken, setTimeTaken] = useState(\n    paused\n      ? millisTakenBeforeStarted\n      : Date.now() -\n          new Date(startedAt).getTime() +\n          millisTakenBeforeStarted,\n  );\n  const timeRef = useRef();\n\n  // UPDATE TIMER\n  useEffect(() => {\n    if (paused) {\n      setTimeTaken(millisTakenBeforeStarted);\n    } else if (!timeRef.current) {\n      timeRef.current = setInterval(\n        () =>\n          setTimeTaken(\n            Date.now() -\n              new Date(startedAt).getTime() +\n              millisTakenBeforeStarted,\n          ),\n        1000,\n      );\n    }\n    return () => {\n      if (timeRef.current) {\n        clearInterval(timeRef.current);\n        timeRef.current = undefined;\n      }\n    };\n  }, [\n    setTimeTaken,\n    timeRef,\n    paused,\n    millisTakenBeforeStarted,\n    startedAt,\n  ]);\n\n  return formatted ? msToMinutesSeconds(timeTaken) : timeTaken;\n};\n\nexport default useTimeTaken;\n"]},"metadata":{},"sourceType":"module"}